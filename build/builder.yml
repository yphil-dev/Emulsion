# electron-builder.yml

appId: io.gitlab.yphil.emulsion
productName: Emulsion
artifactName: "emulsion_${arch}.${ext}"
asar: true

# Unpack the native binaries from the ASAR into this folder so they stay executable
asarUnpack:
  - "bin/**"

files:
  - "**/*"
  - "!**/*.{map,log,md,markdown,txt}"
  - "!**/node_modules/**/*.ts"
  - "!**/**/{test,tests,tmp,example,examples}"
  - "!**/node_modules/**/{CHANGELOG.md,README.md,LICENSE,Makefile}"
  - "!build/**/*"

# Copy the 'bin' folder verbatim alongside the app
extraResources:
  - from: "bin"
    to: "bin"
    filter:
      - "**/*"

publish:
  provider: github
  publishAutoUpdate: false

linux:
  executableName: emulsion
  target:
    # - AppImage
    # - deb
    # - rpm
    # - freebsd
    - pacman
  category: Utility

afterPack: "build/after-pack.js"

win:
  target:
    - nsis
  icon: "img/icons/emulsion.png"

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true

mac:
  category: public.app-category.utilities
  icon: img/icons/emulsion.icns
  target:
    - dmg
